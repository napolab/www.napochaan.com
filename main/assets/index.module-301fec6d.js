var v=Object.defineProperty;var c=(e,n)=>v(e,"name",{value:n,configurable:!0});import{r as a}from"./index-b7196990.js";import{r as E}from"./index-115d09f5.js";import{a as M,g as $}from"./index.module-4753c99f.js";function O(e,n){return a.useReducer((o,r)=>{const i=n[o][r];return i??o},e)}c(O,"$fe963b355347cc68$export$3e6543de14f8614f");const T=c(e=>{const{present:n,children:o}=e,r=h(n),i=typeof o=="function"?o({present:r.isPresent}):a.Children.only(o),u=M(r.ref,i.ref);return typeof o=="function"||r.isPresent?a.cloneElement(i,{ref:u}):null},"$921a889cee6df7e8$export$99c2b779aa4e8b8b");T.displayName="Presence";function h(e){const[n,o]=a.useState(),r=a.useRef({}),i=a.useRef(e),u=a.useRef("none"),A=e?"mounted":"unmounted",[l,s]=O(A,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const t=N(r.current);u.current=l==="mounted"?t:"none"},[l]),$(()=>{const t=r.current,m=i.current;if(m!==e){const p=u.current,f=N(t);e?s("MOUNT"):f==="none"||(t==null?void 0:t.display)==="none"?s("UNMOUNT"):s(m&&p!==f?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,s]),$(()=>{if(n){const t=c(d=>{const f=N(r.current).includes(d.animationName);d.target===n&&f&&E.flushSync(()=>s("ANIMATION_END"))},"handleAnimationEnd"),m=c(d=>{d.target===n&&(u.current=N(r.current))},"handleAnimationStart");return n.addEventListener("animationstart",m),n.addEventListener("animationcancel",t),n.addEventListener("animationend",t),()=>{n.removeEventListener("animationstart",m),n.removeEventListener("animationcancel",t),n.removeEventListener("animationend",t)}}else s("ANIMATION_END")},[n,s]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:a.useCallback(t=>{t&&(r.current=getComputedStyle(t)),o(t)},[])}}c(h,"$921a889cee6df7e8$var$usePresence");function N(e){return(e==null?void 0:e.animationName)||"none"}c(N,"$921a889cee6df7e8$var$getAnimationName");export{T as $};
//# sourceMappingURL=index.module-301fec6d.js.map
